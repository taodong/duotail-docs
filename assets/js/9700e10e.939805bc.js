"use strict";(globalThis.webpackChunkduotail_docs=globalThis.webpackChunkduotail_docs||[]).push([[320],{2484(e,i,s){s.d(i,{A:()=>n});const n=s.p+"assets/images/sub_permission_logic-223226ff56a95bf36c2caa42afe252fd.png"},5932(e,i,s){s.r(i),s.d(i,{assets:()=>a,contentTitle:()=>l,default:()=>h,frontMatter:()=>r,metadata:()=>n,toc:()=>c});const n=JSON.parse('{"id":"concepts/route","title":"Route","description":"What is a Route?","source":"@site/docs/concepts/route.md","sourceDirName":"concepts","slug":"/concepts/route","permalink":"/concepts/route","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_label":"Route","sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Channel","permalink":"/concepts/channel"},"next":{"title":"Contact","permalink":"/concepts/contact"}}');var o=s(4848),t=s(8453);const r={sidebar_label:"Route",sidebar_position:2},l="Route",a={},c=[{value:"What is a Route?",id:"what-is-a-route",level:2},{value:"Route Email",id:"route-email",level:2},{value:"Permissions",id:"permissions",level:3},{value:"Route Type",id:"route-type",level:2},{value:"Subscription Route",id:"subscription-route",level:3},{value:"First Email Auto Permission",id:"first-email-auto-permission",level:4},{value:"Subscription Route Incoming Email Decision Hierarchy",id:"subscription-route-incoming-email-decision-hierarchy",level:4},{value:"Disabled Subcription Route",id:"disabled-subcription-route",level:4},{value:"One-Shot Route",id:"one-shot-route",level:3},{value:"One-Shot Route Incoming Email Decision Hierarchy",id:"one-shot-route-incoming-email-decision-hierarchy",level:4},{value:"Disabled One-Shot Route",id:"disabled-one-shot-route",level:4},{value:"Locked One-Shot Route",id:"locked-one-shot-route",level:4}];function d(e){const i={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",img:"img",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(i.header,{children:(0,o.jsx)(i.h1,{id:"route",children:"Route"})}),"\n",(0,o.jsx)(i.h2,{id:"what-is-a-route",children:"What is a Route?"}),"\n",(0,o.jsxs)(i.p,{children:["A ",(0,o.jsx)(i.strong,{children:"Route"})," defines the rules for incoming emails. The text following the last underscore in an address is the Route ID. For example, in ",(0,o.jsx)(i.code,{children:"a_happy.rhino_food@duotail.com"}),", ",(0,o.jsx)(i.code,{children:"food"})," is the route. If a route rule allows ",(0,o.jsx)(i.code,{children:"deliciousgrass.com"}),", any emails from that domain will be delivered to your inbox."]}),"\n",(0,o.jsx)(i.h2,{id:"route-email",children:"Route Email"}),"\n",(0,o.jsxs)(i.p,{children:["A Route Email is an address structured as ",(0,o.jsx)(i.code,{children:"<channel_id>_<route_id>@duotail.com"}),". For an incoming email to pass through a route, it must comply with either the specific rules of that route or the general rules of the channel to which it belongs."]}),"\n",(0,o.jsx)(i.h3,{id:"permissions",children:"Permissions"}),"\n",(0,o.jsx)(i.p,{children:"Whether an incoming email is delivered to a user is determined by a combination of three types of permissions at the route level:"}),"\n",(0,o.jsxs)(i.ul,{children:["\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"Domain Permission:"})," This permission applies to a specific domain and all its subdomains. It can be set to either ",(0,o.jsx)(i.code,{children:"Enabled"})," or ",(0,o.jsx)(i.code,{children:"Disabled"}),". For example, if deliciousgrass.com is enabled, emails from both ",(0,o.jsx)(i.code,{children:"deliciousgrass.com"})," and ",(0,o.jsx)(i.code,{children:"em.deliciousgrass.com"})," are permitted."]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"Email Permission:"})," This permission applies to a specific email address. It can be either ",(0,o.jsx)(i.code,{children:"Enabled"})," or ",(0,o.jsx)(i.code,{children:"Disabled"}),". For example, if ",(0,o.jsx)(i.code,{children:"spmail@em.deliciousgrass.com"})," is disabled, all emails from that specific address will be blocked."]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"Stamp List:"})," Any email addresses included in the Stamp List are automatically blocked."]}),"\n"]}),"\n",(0,o.jsx)(i.admonition,{title:"Reply Handling",type:"note",children:(0,o.jsxs)(i.p,{children:["If you reply to any email received through a route, an ",(0,o.jsx)(i.code,{children:"Email Permission"})," for that sender will be automatically added to the route settings. This ensures that their future messages are always permitted."]})}),"\n",(0,o.jsx)(i.h2,{id:"route-type",children:"Route Type"}),"\n",(0,o.jsx)(i.p,{children:"There are two types of routes available for our users: subscription route and one-shot route."}),"\n",(0,o.jsx)(i.h3,{id:"subscription-route",children:"Subscription Route"}),"\n",(0,o.jsxs)(i.p,{children:["A ",(0,o.jsx)(i.strong,{children:"Subscription Route"})," is designed to help users manage their email subscriptions effectively. It allows for the creation of comprehensive rules to tailor incoming email permissions specifically for subscription scenarios. Subscription route allows only ",(0,o.jsx)(i.strong,{children:"Domain Permission"})," and ",(0,o.jsx)(i.strong,{children:"Email Permission"}),"."]}),"\n",(0,o.jsx)(i.h4,{id:"first-email-auto-permission",children:"First Email Auto Permission"}),"\n",(0,o.jsx)(i.p,{children:'When a new Subscription Route is created, we recommend leaving the permissions undefined initially. If no permissions are set, the first email to reach the route will be automatically permitted. Furthermore, the host domain of that email will be added to your permission list with the status set to "Enabled." This feature is specifically designed to ensure that third-party confirmation emails reach your inbox without delay.'}),"\n",(0,o.jsx)(i.h4,{id:"subscription-route-incoming-email-decision-hierarchy",children:"Subscription Route Incoming Email Decision Hierarchy"}),"\n",(0,o.jsx)(i.p,{children:'When multiple permissions are set within a subscription route for emails from the same domain, the final decision is determined by a hierarchical "top-down" logic. The system searches for the most specific match first, moving to more general rules only if a match isn\'t found.'}),"\n",(0,o.jsx)(i.p,{children:(0,o.jsx)(i.strong,{children:"The Decision Hierarchy"})}),"\n",(0,o.jsxs)(i.ol,{children:["\n",(0,o.jsxs)(i.li,{children:["\n",(0,o.jsxs)(i.p,{children:[(0,o.jsx)(i.strong,{children:"Exact Email Match:"})," The system first checks if the specific email address is listed. If a match is found, the email is ",(0,o.jsx)(i.code,{children:"Allowed"})," or ",(0,o.jsx)(i.code,{children:"Denied"})," based on that specific setting."]}),"\n"]}),"\n",(0,o.jsxs)(i.li,{children:["\n",(0,o.jsxs)(i.p,{children:[(0,o.jsx)(i.strong,{children:"Full Domain Match:"})," If there is no specific email match, the system checks for a rule matching the exact domain (e.g., ",(0,o.jsx)(i.code,{children:"example.com"}),"). If a rule exists, it is applied immediately."]}),"\n"]}),"\n",(0,o.jsxs)(i.li,{children:["\n",(0,o.jsxs)(i.p,{children:[(0,o.jsx)(i.strong,{children:"Ancestor Domain Match:"})," If no full domain match exists, the system looks for the closest ancestor domain (e.g., if the email is from ",(0,o.jsx)(i.code,{children:"sub.example.com"}),", it looks for a rule for ",(0,o.jsx)(i.code,{children:"example.com"}),")."]}),"\n"]}),"\n",(0,o.jsxs)(i.li,{children:["\n",(0,o.jsxs)(i.p,{children:[(0,o.jsx)(i.strong,{children:"Final Fallback:"})," If no matches are found at any level, the email is ",(0,o.jsx)(i.code,{children:"Denied"})," by default."]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(i.p,{children:(0,o.jsx)(i.img,{alt:"Subscription Permission Logic",src:s(2484).A+"",width:"607",height:"719"})}),"\n",(0,o.jsx)(i.h4,{id:"disabled-subcription-route",children:"Disabled Subcription Route"}),"\n",(0,o.jsxs)(i.p,{children:["If a subscription route is set to ",(0,o.jsx)(i.code,{children:"Disabled"}),", any incoming emails directed to that specific route address are automatically trashed."]}),"\n",(0,o.jsx)(i.h3,{id:"one-shot-route",children:"One-Shot Route"}),"\n",(0,o.jsxs)(i.p,{children:["A ",(0,o.jsx)(i.strong,{children:"One-Shot Route"}),' is designed to handle "serendipity" style interactions, such as those originating from networking events or public inquiries. Under this route, only the first email from a new sender is delivered to your inbox.']}),"\n",(0,o.jsxs)(i.p,{children:["In addition to standard domain and email permissions, the One-Shot Route utilizes a built-in ",(0,o.jsx)(i.strong,{children:"Stamp List"})," to track previous senders. Once a sender has messaged you, they are added to this list and subsequent emails from them are blocked. To allow a follow-up email from a specific sender, you can simply remove their address from the Stamp List."]}),"\n",(0,o.jsxs)(i.p,{children:[(0,o.jsx)(i.strong,{children:"Example:"})," Suppose ",(0,o.jsx)(i.code,{children:"hug"})," is a One-Shot Route under the channel a_happy.rhino."]}),"\n",(0,o.jsxs)(i.ul,{children:["\n",(0,o.jsxs)(i.li,{children:["\n",(0,o.jsxs)(i.p,{children:["If a new sender, ",(0,o.jsx)(i.code,{children:"angry.gazelle@example.com"}),", sends an email to this route, the message will be delivered."]}),"\n"]}),"\n",(0,o.jsxs)(i.li,{children:["\n",(0,o.jsxs)(i.p,{children:["However, any subsequent emails from ",(0,o.jsx)(i.code,{children:"angry.gazelle@example.com"})," will be automatically discarded."]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(i.h4,{id:"one-shot-route-incoming-email-decision-hierarchy",children:"One-Shot Route Incoming Email Decision Hierarchy"}),"\n",(0,o.jsx)(i.p,{children:"A One-Shot Route determines whether an email is delivered using the following hierarchy:"}),"\n",(0,o.jsxs)(i.ol,{children:["\n",(0,o.jsxs)(i.li,{children:["\n",(0,o.jsxs)(i.p,{children:[(0,o.jsx)(i.strong,{children:"Permission Check:"})," The system first follows the same ",(0,o.jsx)(i.a,{href:"#subscription-route-incoming-email-decision-hierarchy",children:"decision hierarchy as a Subscription Route"}),', checking all domain and email-level permissions. If an explicit "Enabled" permission is found, the email is delivered immediately.']}),"\n"]}),"\n",(0,o.jsxs)(i.li,{children:["\n",(0,o.jsxs)(i.p,{children:[(0,o.jsx)(i.strong,{children:"Stamp List Check:"})," If no explicit permission is found in Step 1, the system checks the Stamp List. The email will be delivered only if the sender\u2019s address is not already present on the list."]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(i.h4,{id:"disabled-one-shot-route",children:"Disabled One-Shot Route"}),"\n",(0,o.jsxs)(i.p,{children:["If a One-Shot route is set to ",(0,o.jsx)(i.code,{children:"Disabled"}),", any incoming emails directed to that specific route address are automatically trashed."]}),"\n",(0,o.jsx)(i.h4,{id:"locked-one-shot-route",children:"Locked One-Shot Route"}),"\n",(0,o.jsxs)(i.p,{children:["To protect against the risk of a One-Shot email address being leaked or falling into the wrong hands, these routes can be ",(0,o.jsx)(i.code,{children:"Locked"}),"."]}),"\n",(0,o.jsxs)(i.p,{children:["When a route is locked, the system skips the Stamp List check and performs a Permission Check only. In this state, only emails from senders with explicit ",(0,o.jsx)(i.code,{children:"Enabled"})," permissions will be delivered; all other incoming emails will be blocked."]})]})}function h(e={}){const{wrapper:i}={...(0,t.R)(),...e.components};return i?(0,o.jsx)(i,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},8453(e,i,s){s.d(i,{R:()=>r,x:()=>l});var n=s(6540);const o={},t=n.createContext(o);function r(e){const i=n.useContext(t);return n.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function l(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),n.createElement(t.Provider,{value:i},e.children)}}}]);